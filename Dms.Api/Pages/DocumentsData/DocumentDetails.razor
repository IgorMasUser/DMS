@page "/documentDetails/{id:int}"
@using Dms.Api.Pages.DocumentsData.Parts
@using Microsoft.AspNetCore.Authorization;
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Extensions.Localization;
@using Microsoft.Extensions.Logging;
@using Severity = MudBlazor.Severity;

@inherits DocumentDetailsPageBase


@if (pageLoading)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
    <PageTitle>@Dto.DocumentNumber</PageTitle>
    <MudButtonGroup Class="shirt-toolbar" Size=Size.Large Color="Color.Primary" Variant="Variant.Filled">
        <MudButton OnClick="@NavigateBack" IconColor=Color.Secondary StartIcon="@Icons.Material.Filled.ArrowBack">Back to documents list</MudButton>
        <MudIconButton OnClick=@(async () => await DownloadFile(@Dto.DocumentNumber)) Icon="@Icons.Material.Filled.Download"></MudIconButton>
    </MudButtonGroup>

    <DocumentDetailsBody Dto="Dto" />
    <DocumentDetailsHistory Dto="Dto" />
}