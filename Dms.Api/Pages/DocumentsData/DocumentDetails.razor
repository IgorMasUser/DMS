@page "/documentDetails/{id:int}"
@using Dms.Api.Pages.DocumentsData.Parts
@using Microsoft.AspNetCore.Authorization;
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.Extensions.Localization;
@using Microsoft.Extensions.Logging;
@using Severity = MudBlazor.Severity;

@inherits DocumentDetailsPageBase


@if (pageLoading)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-7" />
}
else
{
    <PageTitle>@Dto.DocumentNumber</PageTitle>
    <MudCard>
        <MudButtonGroup Size="Size.Large" Color="Color.Primary" Variant="Variant.Filled">
            <MudButton OnClick="@NavigateBack" IconColor=Color.Secondary StartIcon="@Icons.Material.Filled.ArrowBack">Back to documents list</MudButton>
            <MudIconButton OnClick=@(async () => await DownloadFile(@Dto.DocumentNumber)) Icon="@Icons.Material.Filled.Download"></MudIconButton>
        </MudButtonGroup>
        <MudText Typo="Typo.h5" Class="mb-4">Document details</MudText>
        <DocumentDetailsBody Dto="Dto" />
    </MudCard>
    <MudCard Class="mb-4">
        <MudText Typo="Typo.h5">Document history</MudText>
        <DocumentDetailsHistory Dto="Dto" />
    </MudCard>
}

<style>
    .mb-4 {
        margin-top: 40px;
    }
</style>